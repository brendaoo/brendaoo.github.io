<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Logs</title>
  <icon>https://brendaoo.github.io/icon.png</icon>
  
  <link href="https://brendaoo.github.io/atom.xml" rel="self"/>
  
  <link href="https://brendaoo.github.io/"/>
  <updated>2022-05-15T08:22:51.228Z</updated>
  <id>https://brendaoo.github.io/</id>
  
  <author>
    <name>Brenda</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>VPC内子网联网</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/</id>
    <published>2022-05-15T08:22:51.228Z</published>
    <updated>2022-05-15T08:22:51.228Z</updated>
    
    
    <summary type="html">&lt;h1 id=&quot;VPC内子网联网&quot;&gt;&lt;a href=&quot;#VPC内子网联网&quot; class=&quot;headerlink&quot; title=&quot;VPC内子网联网&quot;&gt;&lt;/a&gt;VPC内子网联网&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;VPC中有2种子网类型：公共子网和私有子网&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所谓公共子网就是其对应的路由表中配置了规则将请求路由到了 &lt;code&gt;Internet Gateway&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;私有子网就是其关联的路由表中没有配置到 &lt;code&gt;Internet Gatway&lt;/code&gt; 的路由规则，因此无法对外访问。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AWS 的 VPC 网络配置关系是：&lt;em&gt;&lt;strong&gt;实例与子网关联，子网关联路由表，路由表设置网关&lt;/strong&gt;&lt;/em&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;公共子网联网&quot;&gt;&lt;a href=&quot;#公共子网联网&quot; class=&quot;headerlink&quot; title=&quot;公共子网联网&quot;&gt;&lt;/a&gt;公共子网联网&lt;/h2&gt;&lt;h3 id=&quot;介绍IGW&quot;&gt;&lt;a href=&quot;#介绍IGW&quot; class=&quot;headerlink&quot; title=&quot;介绍IGW&quot;&gt;&lt;/a&gt;介绍IGW&lt;/h3&gt;&lt;p&gt;公共子网通过IGW(Internet gateway)组件来实现VPC和Internet的相互通信。&lt;/p&gt;
&lt;p&gt;IGW提供两项功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Subnet中的流量通过IGW访问Internet&lt;/li&gt;
&lt;li&gt;为配置了Public IP的Instance提供网址转换&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;操作&quot;&gt;&lt;a href=&quot;#操作&quot; class=&quot;headerlink&quot; title=&quot;操作&quot;&gt;&lt;/a&gt;操作&lt;/h3&gt;&lt;h4 id=&quot;1-创建VPC&quot;&gt;&lt;a href=&quot;#1-创建VPC&quot; class=&quot;headerlink&quot; title=&quot;1.创建VPC&quot;&gt;&lt;/a&gt;1.创建VPC&lt;/h4&gt;&lt;p&gt;手动创建VPC，即不通过向导的方式进行创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010040498.png&quot; alt=&quot;image-20220330010040498&quot;&gt;&lt;/p&gt;
&lt;p&gt;VPC的设置如下&lt;/p&gt;
&lt;p&gt;选择“仅VPC”&lt;/p&gt;
&lt;p&gt;命名为：my-vpc-02&lt;/p&gt;
&lt;p&gt;IPv4 CIDR：172.16.0.0&amp;#x2F;22&lt;/p&gt;
&lt;p&gt;其他保持默认，点击创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010150289.png&quot; alt=&quot;image-20220330010150289&quot;&gt;&lt;/p&gt;
&lt;p&gt;查看创建好的VPC&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010359754.png&quot; alt=&quot;image-20220330010359754&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-创建互联网网关&quot;&gt;&lt;a href=&quot;#2-创建互联网网关&quot; class=&quot;headerlink&quot; title=&quot;2.创建互联网网关&quot;&gt;&lt;/a&gt;2.创建互联网网关&lt;/h4&gt;&lt;p&gt;点击“新建互联网网关”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010558808.png&quot; alt=&quot;image-20220330010558808&quot;&gt;&lt;/p&gt;
&lt;p&gt;将该互联网网关命名为：my-igw-02&lt;/p&gt;
&lt;p&gt;点击创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010653543.png&quot; alt=&quot;image-20220330010653543&quot;&gt;&lt;/p&gt;
&lt;p&gt;互联网网关已经建好，将它附加到VPC，点击下图中的1或2处都可以&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010838397.png&quot; alt=&quot;image-20220330010838397&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择新建的VPC，my-vpc-02，连接互联网网关&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330010919597.png&quot; alt=&quot;image-20220330010919597&quot;&gt;&lt;/p&gt;
&lt;p&gt;互联网网关成功附加到了VPC上&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330011023866.png&quot; alt=&quot;image-20220330011023866&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;3-创建公有子网&quot;&gt;&lt;a href=&quot;#3-创建公有子网&quot; class=&quot;headerlink&quot; title=&quot;3.创建公有子网&quot;&gt;&lt;/a&gt;3.创建公有子网&lt;/h4&gt;&lt;p&gt;点击“创建子网”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330011136211.png&quot; alt=&quot;image-20220330011136211&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择新建的VPC，my-vpc-02&lt;/p&gt;
&lt;p&gt;创建一个子网，命令为：my-sub-pub-02&lt;/p&gt;
&lt;p&gt;可用区可以选择当前区域的任意可用区，此处选择“us-east-1a”&lt;/p&gt;
&lt;p&gt;IPv4 CIDR: 172.16.1.0&amp;#x2F;24&lt;/p&gt;
&lt;p&gt;点击“创建子网”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330011507485.png&quot; alt=&quot;image-20220330011507485&quot;&gt;&lt;/p&gt;
&lt;p&gt;子网创建成功&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330011727300.png&quot; alt=&quot;image-20220330011727300&quot;&gt;&lt;/p&gt;
&lt;p&gt;进入到该子网的路由表，点击路由表的id进入&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330011823385.png&quot; alt=&quot;image-20220330011823385&quot;&gt;&lt;/p&gt;
&lt;p&gt;查看该路由表的路由条目，点击“编辑路由”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330012003132.png&quot; alt=&quot;image-20220330012003132&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击“添加路由”，新的路由如下&lt;/p&gt;
&lt;p&gt;第一个空选择：0.0.0.0&amp;#x2F;0，第二空选项“互联网网关”，随后会跳出刚创建的IGW，点击“保存更改”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330012108517.png&quot; alt=&quot;image-20220330012108517&quot;&gt;&lt;/p&gt;
&lt;p&gt;路由表新增条目成功&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330012306561.png&quot; alt=&quot;image-20220330012306561&quot;&gt;&lt;/p&gt;
&lt;p&gt;由于该子网添加了IGW，于是该子网成为了公共子网，给子网内的ec2分配公有子网或者弹性IP之后可以访问到Internet。&lt;/p&gt;
&lt;h4 id=&quot;4-创建安全组&quot;&gt;&lt;a href=&quot;#4-创建安全组&quot; class=&quot;headerlink&quot; title=&quot;4.创建安全组&quot;&gt;&lt;/a&gt;4.创建安全组&lt;/h4&gt;&lt;p&gt;点击创建安全组&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330093212864.png&quot; alt=&quot;image-20220330093212864&quot;&gt;&lt;/p&gt;
&lt;p&gt;安全组名称：my-Security-Group-02&lt;/p&gt;
&lt;p&gt;VPC选择my-vpc-02&lt;/p&gt;
&lt;p&gt;添加2条入站信息，分别是22端口和ICMP&lt;/p&gt;
&lt;p&gt;配置完成之后，点击创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330093653373.png&quot; alt=&quot;image-20220330093653373&quot;&gt;&lt;/p&gt;
&lt;p&gt;安全组创建完成&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330093716680.png&quot; alt=&quot;image-20220330093716680&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;5-创建EC2&quot;&gt;&lt;a href=&quot;#5-创建EC2&quot; class=&quot;headerlink&quot; title=&quot;5.创建EC2&quot;&gt;&lt;/a&gt;5.创建EC2&lt;/h4&gt;&lt;p&gt;点击“启动新实例”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330092020102.png&quot; alt=&quot;image-20220330092020102&quot;&gt;&lt;/p&gt;
&lt;p&gt;在AWS Marketplace中选择Centos7这个AMI&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330092149765.png&quot; alt=&quot;image-20220330092149765&quot;&gt;&lt;/p&gt;
&lt;p&gt;实例类型选择t2.micro，点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330092236542.png&quot; alt=&quot;image-20220330092236542&quot;&gt;&lt;/p&gt;
&lt;p&gt;网络选择刚才新建的VPC，my-vpc-02&lt;/p&gt;
&lt;p&gt;子网选择公共子网，my-sub-pub-02&lt;/p&gt;
&lt;p&gt;自动分配公有IP处选择&lt;font color=&quot;red&quot;&gt;禁用&lt;/font&gt;，说明稍后给ec2绑定弹性IP，而不使用创建是分配的公网IP&lt;/p&gt;
&lt;p&gt;配置完成后，点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330092539598.png&quot; alt=&quot;image-20220330092539598&quot;&gt;&lt;/p&gt;
&lt;p&gt;存储使用默认的资源配置，点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330093025676.png&quot; alt=&quot;image-20220330093025676&quot;&gt;&lt;/p&gt;
&lt;p&gt;给EC2添加标签，Name: test-pub-02，点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330095554126.png&quot; alt=&quot;image-20220330095554126&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择现有安全组my-Security-Group-02&lt;/p&gt;
&lt;p&gt;点击审核和启动&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330095703240.png&quot; alt=&quot;image-20220330095703240&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击启动&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330095726364.png&quot; alt=&quot;image-20220330095726364&quot;&gt;&lt;/p&gt;
&lt;p&gt;因为我之前有密钥对，所以选择“选择现有密钥对”选项。如果之前没有密钥对选择新建，输入密钥对的名字之后会进行下载。&lt;/p&gt;
&lt;p&gt;点击启动新实例&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330095853535.png&quot; alt=&quot;image-20220330095853535&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;6-创建-amp-绑定弹性IP&quot;&gt;&lt;a href=&quot;#6-创建-amp-绑定弹性IP&quot; class=&quot;headerlink&quot; title=&quot;6.创建&amp;amp;绑定弹性IP&quot;&gt;&lt;/a&gt;6.创建&amp;amp;绑定弹性IP&lt;/h4&gt;&lt;p&gt;点击分配弹性IP地址&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330104427148.png&quot; alt=&quot;image-20220330104427148&quot;&gt;&lt;/p&gt;
&lt;p&gt;设置键值对 Name: ec2-test-pub-02&lt;/p&gt;
&lt;p&gt;点击分配&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330104522655.png&quot; alt=&quot;image-20220330104522655&quot;&gt;&lt;/p&gt;
&lt;p&gt;关联该弹性IP&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330104554944.png&quot; alt=&quot;image-20220330104554944&quot;&gt;&lt;/p&gt;
&lt;p&gt;实例选择test-pub-02，选择私有IP地址，点击关联&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330104656288.png&quot; alt=&quot;image-20220330104656288&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;7-测试&quot;&gt;&lt;a href=&quot;#7-测试&quot; class=&quot;headerlink&quot; title=&quot;7.测试&quot;&gt;&lt;/a&gt;7.测试&lt;/h4&gt;&lt;p&gt;访问EC2可以ping通baidu.com&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330110421486.png&quot; alt=&quot;image-20220330110421486&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;私有子网联网&quot;&gt;&lt;a href=&quot;#私有子网联网&quot; class=&quot;headerlink&quot; title=&quot;私有子网联网&quot;&gt;&lt;/a&gt;私有子网联网&lt;/h2&gt;&lt;h3 id=&quot;介绍NAT-GW&quot;&gt;&lt;a href=&quot;#介绍NAT-GW&quot; class=&quot;headerlink&quot; title=&quot;介绍NAT GW&quot;&gt;&lt;/a&gt;介绍NAT GW&lt;/h3&gt;&lt;p&gt;NAT GW是一种网络地址转换服务。可以使用NAT网关将私有子网中的实例连接到VPC外部的服务，但是外部无法启动与这些实例的连接。&lt;/p&gt;
&lt;p&gt;在创建 NAT 网关时，指定以下连接类型之一：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;公开&lt;/strong&gt; –（默认）私有子网中的实例可以通过公共 NAT 网关连接到互联网，但不能接收来自互联网的未经请求的入站连接。&lt;font color=&quot;red&quot;&gt;在公有子网中创建公有 NAT 网关，并且必须在创建时将弹性 IP 地址与 NAT 网关相关联。可以将流量从 NAT 网关路由到 VPC 的互联网网关。&lt;/font&gt;或者，您可以使用公有 NAT 网关连接到其他 VPC 或本地部署网络。在这种情况下，您可以借助中转网关或虚拟私有网关路由来自 NAT 网关的流量。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;私密&lt;/strong&gt; – 私有子网中的实例可以通过私有 NAT 网关连接到其他 VPC 或您的本地部署网络。您可以借助中转网关或虚拟私有网关路由来自 NAT 网关的流量。您不能将弹性 IP 地址与私有 NAT 网关相关联。您可以将互联网网关连接到具有私有 NAT 网关的 VPC，但如果您将流量从私有 NAT 网关路由到互联网网关，则互联网网关会丢弃流量。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;NAT 网关将实例的源 IP 地址替换为 NAT 网关的 IP 地址。对于公有 NAT 网关，这是 NAT 网关的弹性 IP 地址。对于私有 NAT 网关，这是 NAT 网关的私有 IP 地址。向实例发送响应流量时，NAT 设备会将地址转换回原始源 IP 地址。&lt;/p&gt;
&lt;p&gt;注意：NAT网关要给私有子网使用，其自身要在公有子网内，即需要保证它自身能够访问到互联网。&lt;/p&gt;
&lt;h3 id=&quot;操作-1&quot;&gt;&lt;a href=&quot;#操作-1&quot; class=&quot;headerlink&quot; title=&quot;操作&quot;&gt;&lt;/a&gt;操作&lt;/h3&gt;&lt;h4 id=&quot;1-创建私有子网&quot;&gt;&lt;a href=&quot;#1-创建私有子网&quot; class=&quot;headerlink&quot; title=&quot;1.创建私有子网&quot;&gt;&lt;/a&gt;1.创建私有子网&lt;/h4&gt;&lt;p&gt;新建子网&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330112048218.png&quot; alt=&quot;image-20220330112048218&quot;&gt;&lt;/p&gt;
&lt;p&gt;子网配置信息&lt;/p&gt;
&lt;p&gt;VPC选择my-vpc-02&lt;/p&gt;
&lt;p&gt;子网命名为my-sub-pri-02&lt;/p&gt;
&lt;p&gt;可用区可以随意选择，最好和公共子网在两个不同的可用区&lt;/p&gt;
&lt;p&gt;IPv4 CIDR为172.16.2.0&amp;#x2F;24&lt;/p&gt;
&lt;p&gt;配置完成之后点击创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330112158262.png&quot; alt=&quot;image-20220330112158262&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;2-创建NAT网关&quot;&gt;&lt;a href=&quot;#2-创建NAT网关&quot; class=&quot;headerlink&quot; title=&quot;2.创建NAT网关&quot;&gt;&lt;/a&gt;2.创建NAT网关&lt;/h4&gt;&lt;p&gt;点击创建NAT网关&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330112448923.png&quot; alt=&quot;image-20220330112448923&quot;&gt;&lt;/p&gt;
&lt;p&gt;nat网关设置&lt;/p&gt;
&lt;p&gt;命名为my-nat-02&lt;/p&gt;
&lt;p&gt;子网选择公有子网，类型为公有&lt;/p&gt;
&lt;p&gt;为它分配弹性IP&lt;/p&gt;
&lt;p&gt;配置完成之后点击创建&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330112702279.png&quot; alt=&quot;image-20220330112702279&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;3-私有子网路由表关联NAT网关&quot;&gt;&lt;a href=&quot;#3-私有子网路由表关联NAT网关&quot; class=&quot;headerlink&quot; title=&quot;3.私有子网路由表关联NAT网关&quot;&gt;&lt;/a&gt;3.私有子网路由表关联NAT网关&lt;/h4&gt;&lt;p&gt;创建私网路由表&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330132430858.png&quot; alt=&quot;image-20220330132430858&quot;&gt;&lt;/p&gt;
&lt;p&gt;为新建的路由表设置子网关联&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330132953082.png&quot; alt=&quot;image-20220330132953082&quot;&gt;&lt;/p&gt;
&lt;p&gt;将该表关联到私有子网&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330133016115.png&quot; alt=&quot;image-20220330133016115&quot;&gt;&lt;/p&gt;
&lt;p&gt;将公共子网使用的这张表改名，以便标识&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330133149273.png&quot; alt=&quot;image-20220330133149273&quot;&gt;&lt;/p&gt;
&lt;p&gt;编辑私有子网的这张路由表&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330133240295.png&quot; alt=&quot;image-20220330133240295&quot;&gt;&lt;/p&gt;
&lt;p&gt;新增一条路由到nat网关，添加好之后点击保存更改&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330133310859.png&quot; alt=&quot;image-20220330133310859&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;4-创建EC2&quot;&gt;&lt;a href=&quot;#4-创建EC2&quot; class=&quot;headerlink&quot; title=&quot;4.创建EC2&quot;&gt;&lt;/a&gt;4.创建EC2&lt;/h4&gt;&lt;p&gt;创建步骤同在公共子网中创建EC2，省略大部分配置&lt;/p&gt;
&lt;p&gt;需要特别注意的地方如下&lt;/p&gt;
&lt;p&gt;网络选择my-vpc-02，子网选择新建的私有子网my-sub-pri-02，禁用自动分配公有IP功能&lt;/p&gt;
&lt;p&gt;其余的配置与在公共子网内的配置大同小异，无非就是命名不一致，这里就不过多赘述&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330115204934.png&quot; alt=&quot;image-20220330115204934&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;5-测试&quot;&gt;&lt;a href=&quot;#5-测试&quot; class=&quot;headerlink&quot; title=&quot;5.测试&quot;&gt;&lt;/a&gt;5.测试&lt;/h4&gt;&lt;p&gt;需要说明一下，访问该私有子网的EC2需要通过公共子网内的EC2作为跳板机来访问&lt;/p&gt;
&lt;p&gt;即先ssh到公共子网内的EC2，在此基础上ssh到私有子网的EC2上&lt;/p&gt;
&lt;p&gt;将密钥文件通过SCP上传到公网EC2上&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330134025275.png&quot; alt=&quot;image-20220330134025275&quot;&gt;&lt;/p&gt;
&lt;p&gt;进行ping测试，可以成功ping通baidu.com&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2022/05/15/AWS/Network/VPC%E5%86%85%E5%AD%90%E7%BD%91%E8%81%94%E7%BD%91/image-20220330134155233.png&quot; alt=&quot;image-20220330134155233&quot;&gt;&lt;/p&gt;
&lt;p&gt;注意点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;VPC默认只有一张路由表，先创建公共子网，再创建私有子网的情况下要单独为私有子网创建一张路由表&lt;/li&gt;
&lt;li&gt;NAT网关通Internet的话，要把NAT网关创建在公共子网中，并为其分配弹性IP&lt;/li&gt;
&lt;li&gt;子网（公共子网&amp;amp;私有子网）会有一定的地址保留。Amazon会保留各个子网的前面4个IP地址和最后1个IP地址，以作IP联网之用。&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="VPC" scheme="https://brendaoo.github.io/categories/AWS/VPC/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="VPC" scheme="https://brendaoo.github.io/tags/VPC/"/>
    
  </entry>
  
  <entry>
    <title>AWS NLB负载均衡</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/NLB%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/NLB%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</id>
    <published>2022-05-15T07:40:22.100Z</published>
    <updated>2022-05-15T07:40:22.100Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-NLB负载均衡&quot;&gt;&lt;a href=&quot;#AWS-NLB负载均衡&quot; class=&quot;headerlink&quot; title=&quot;AWS NLB负载均衡&quot;&gt;&lt;/a&gt;AWS NLB负载均衡&lt;/h1&gt;&lt;h2 id=&quot;实验说明：&quot;&gt;&lt;a href=&quot;#实验说明：&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="ELB" scheme="https://brendaoo.github.io/categories/AWS/ELB/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="NLB" scheme="https://brendaoo.github.io/tags/NLB/"/>
    
    <category term="网络" scheme="https://brendaoo.github.io/tags/%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>HTTPS自建SSl证书</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/HTTPS%E8%87%AA%E5%BB%BASSL%E8%AF%81%E4%B9%A6/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/HTTPS%E8%87%AA%E5%BB%BASSL%E8%AF%81%E4%B9%A6/</id>
    <published>2022-05-15T07:40:21.174Z</published>
    <updated>2022-05-15T07:40:21.174Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;实验步骤&quot;&gt;&lt;a href=&quot;#实验步骤&quot; class=&quot;headerlink&quot; title=&quot;实验步骤&quot;&gt;&lt;/a&gt;实验步骤&lt;/h1&gt;&lt;h2 id=&quot;申请免费证书&quot;&gt;&lt;a href=&quot;#申请免费证书&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="ELB" scheme="https://brendaoo.github.io/categories/AWS/ELB/"/>
    
    
    <category term="ALB" scheme="https://brendaoo.github.io/tags/ALB/"/>
    
    <category term="HTTP证书" scheme="https://brendaoo.github.io/tags/HTTP%E8%AF%81%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>ALB负载均衡</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/ALB%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/LoadBalance/ALB%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/</id>
    <published>2022-05-15T07:40:20.202Z</published>
    <updated>2022-05-15T07:40:20.202Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;ALB负载均衡&quot;&gt;&lt;a href=&quot;#ALB负载均衡&quot; class=&quot;headerlink&quot; title=&quot;ALB负载均衡&quot;&gt;&lt;/a&gt;ALB负载均衡&lt;/h1&gt;&lt;h2 id=&quot;Part1-AWS-ALB介绍&quot;&gt;&lt;a href=&quot;#Part1-AWS-ALB介绍&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="ELB" scheme="https://brendaoo.github.io/categories/AWS/ELB/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="ALB" scheme="https://brendaoo.github.io/tags/ALB/"/>
    
    <category term="Route53" scheme="https://brendaoo.github.io/tags/Route53/"/>
    
  </entry>
  
  <entry>
    <title>AWS WorkSpaces入门2</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/WorkSpaces/Amazon_WorkSpaces%E5%85%A5%E9%97%A82(%E6%93%8D%E4%BD%9C)/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/WorkSpaces/Amazon_WorkSpaces%E5%85%A5%E9%97%A82(%E6%93%8D%E4%BD%9C)/</id>
    <published>2022-05-15T06:41:47.272Z</published>
    <updated>2022-05-15T06:41:47.272Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;本节主要讲述的就是在AWS上创建WorkSpaces。&lt;/p&gt;
&lt;p&gt;流程：创建VPC–&amp;gt;创建目录–&amp;gt;创建WorkSpaces&lt;/p&gt;
&lt;h1 id=&quot;Part1-创建VPC&quot;&gt;&lt;a href=&quot;#Part1-创建VPC&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="WorkSpaces" scheme="https://brendaoo.github.io/categories/AWS/WorkSpaces/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="WorkSpaces" scheme="https://brendaoo.github.io/tags/WorkSpaces/"/>
    
  </entry>
  
  <entry>
    <title>AWS WorkSpaces入门1</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/WorkSpaces/Amazon_WorkSpaces%E5%85%A5%E9%97%A81(%E7%90%86%E8%AE%BA)/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/WorkSpaces/Amazon_WorkSpaces%E5%85%A5%E9%97%A81(%E7%90%86%E8%AE%BA)/</id>
    <published>2022-05-15T06:41:00.495Z</published>
    <updated>2022-05-15T06:41:00.495Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-WorkSpaces入门1&quot;&gt;&lt;a href=&quot;#AWS-WorkSpaces入门1&quot; class=&quot;headerlink&quot; title=&quot;AWS WorkSpaces入门1&quot;&gt;&lt;/a&gt;AWS</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="WorkSpaces" scheme="https://brendaoo.github.io/categories/AWS/WorkSpaces/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="WorkSpaces" scheme="https://brendaoo.github.io/tags/WorkSpaces/"/>
    
  </entry>
  
  <entry>
    <title>AWS STS正确设计IAM用户密钥（二）</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_STS%E6%AD%A3%E7%A1%AE%E8%AE%BE%E8%AE%A1IAM%E7%94%A8%E6%88%B7%E5%AF%86%E9%92%A52/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_STS%E6%AD%A3%E7%A1%AE%E8%AE%BE%E8%AE%A1IAM%E7%94%A8%E6%88%B7%E5%AF%86%E9%92%A52/</id>
    <published>2022-05-15T03:39:37.229Z</published>
    <updated>2022-05-15T03:39:37.229Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-STS正确设计IAM用户密钥（二）&quot;&gt;&lt;a href=&quot;#AWS-STS正确设计IAM用户密钥（二）&quot; class=&quot;headerlink&quot; title=&quot;AWS STS正确设计IAM用户密钥（二）&quot;&gt;&lt;/a&gt;AWS</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
  </entry>
  
  <entry>
    <title>AWS STS正确设计IAM用户密钥（一）</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_STS%E6%AD%A3%E7%A1%AE%E8%AE%BE%E8%AE%A1IAM%E7%94%A8%E6%88%B7%E5%AF%86%E9%92%A51/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_STS%E6%AD%A3%E7%A1%AE%E8%AE%BE%E8%AE%A1IAM%E7%94%A8%E6%88%B7%E5%AF%86%E9%92%A51/</id>
    <published>2022-05-15T03:39:36.826Z</published>
    <updated>2022-05-15T03:39:36.826Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-STS正确设计IAM用户密钥（一）&quot;&gt;&lt;a href=&quot;#AWS-STS正确设计IAM用户密钥（一）&quot; class=&quot;headerlink&quot; title=&quot;AWS STS正确设计IAM用户密钥（一）&quot;&gt;&lt;/a&gt;AWS</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
  </entry>
  
  <entry>
    <title>跨账户IAM角色访问</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/%E8%B7%A8%E8%B4%A6%E6%88%B7IAM%E8%A7%92%E8%89%B2%E8%AE%BF%E9%97%AE/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/%E8%B7%A8%E8%B4%A6%E6%88%B7IAM%E8%A7%92%E8%89%B2%E8%AE%BF%E9%97%AE/</id>
    <published>2022-05-15T03:39:35.322Z</published>
    <updated>2022-05-15T03:39:35.322Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;跨账户IAM角色访问&quot;&gt;&lt;a href=&quot;#跨账户IAM角色访问&quot; class=&quot;headerlink&quot; title=&quot;跨账户IAM角色访问&quot;&gt;&lt;/a&gt;跨账户IAM角色访问&lt;/h1&gt;&lt;h2 id=&quot;Part1-场景描述&quot;&gt;&lt;a</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
  </entry>
  
  <entry>
    <title>AWS Organizations账户管理服务&amp;SCP</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_Organizations%E8%B4%A6%E6%88%B7%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1&amp;SCP/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_Organizations%E8%B4%A6%E6%88%B7%E7%AE%A1%E7%90%86%E6%9C%8D%E5%8A%A1&amp;SCP/</id>
    <published>2022-05-15T03:31:30.718Z</published>
    <updated>2022-05-15T03:25:22.589Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-Organizations账户管理服务-amp-SCP&quot;&gt;&lt;a href=&quot;#AWS-Organizations账户管理服务-amp-SCP&quot; class=&quot;headerlink&quot; title=&quot;AWS</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
    <category term="Organizations" scheme="https://brendaoo.github.io/tags/Organizations/"/>
    
  </entry>
  
  <entry>
    <title>AWS IAM小结</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_IAM%E5%B0%8F%E7%BB%93/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/AWS_IAM%E5%B0%8F%E7%BB%93/</id>
    <published>2022-05-15T03:31:30.707Z</published>
    <updated>2022-05-15T03:24:55.954Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;AWS-IAM小结&quot;&gt;&lt;a href=&quot;#AWS-IAM小结&quot; class=&quot;headerlink&quot; title=&quot;AWS IAM小结&quot;&gt;&lt;/a&gt;AWS IAM小结&lt;/h1&gt;&lt;h2 id=&quot;PART1-问题及总结&quot;&gt;&lt;a href=&quot;#PART1-问题及总结&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
  </entry>
  
  <entry>
    <title>配置CloudTrial和Config日志跨AWS账户日志存储</title>
    <link href="https://brendaoo.github.io/2022/05/15/AWS/IAM/%E9%85%8D%E7%BD%AECloudTrial%E5%92%8CConfig%E6%97%A5%E5%BF%97%E8%B7%A8AWS%E8%B4%A6%E6%88%B7%E6%97%A5%E5%BF%97%E5%AD%98%E5%82%A8/"/>
    <id>https://brendaoo.github.io/2022/05/15/AWS/IAM/%E9%85%8D%E7%BD%AECloudTrial%E5%92%8CConfig%E6%97%A5%E5%BF%97%E8%B7%A8AWS%E8%B4%A6%E6%88%B7%E6%97%A5%E5%BF%97%E5%AD%98%E5%82%A8/</id>
    <published>2022-05-15T03:31:30.702Z</published>
    <updated>2022-05-15T03:25:58.124Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;h1 id=&quot;配置CloudTrial和Config日志跨AWS账户日志存储&quot;&gt;&lt;a href=&quot;#配置CloudTrial和Config日志跨AWS账户日志存储&quot; class=&quot;headerlink&quot;</summary>
        
      
    
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/categories/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/categories/AWS/IAM/"/>
    
    
    <category term="AWS" scheme="https://brendaoo.github.io/tags/AWS/"/>
    
    <category term="IAM" scheme="https://brendaoo.github.io/tags/IAM/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://brendaoo.github.io/2022/05/09/hello-world/"/>
    <id>https://brendaoo.github.io/2022/05/09/hello-world/</id>
    <published>2022-05-08T19:15:51.803Z</published>
    <updated>2022-05-08T19:12:55.094Z</updated>
    
    
      
      
        
        
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt;</summary>
        
      
    
    
    
    
  </entry>
  
</feed>
